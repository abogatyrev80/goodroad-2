{"dependencies":[{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":59,"index":59}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"],"imports":1}},{"name":"./Battery.types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":60},"end":{"line":2,"column":47,"index":107}}],"key":"NbAodYJDVfR60c0Cq2iPQrcRNuw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _expoModulesCore = require(_dependencyMap[0], \"expo-modules-core\");\n  var _BatteryTypes = require(_dependencyMap[1], \"./Battery.types\");\n  const emitter = new _expoModulesCore.EventEmitter();\n  var _default = {\n    get isSupported() {\n      // https://developer.mozilla.org/en-US/docs/Web/API/Navigator/getBattery#Browser_compatibility\n      return _expoModulesCore.Platform.isDOMAvailable && ('getBattery' in navigator || 'battery' in navigator);\n    },\n    async getBatteryLevelAsync() {\n      const batteryManager = await getBatteryManagerAsync();\n      if (!batteryManager) return -1;\n      return batteryManager.level;\n    },\n    async getBatteryStateAsync() {\n      const batteryManager = await getBatteryManagerAsync();\n      if (!batteryManager) return _BatteryTypes.BatteryState.UNKNOWN;\n      return getBatteryState(batteryManager.charging, batteryManager.level);\n    },\n    async startObserving() {\n      const batteryManager = await getBatteryManagerAsync();\n      if (!batteryManager) return;\n      batteryManager.addEventListener('chargingchange', onChargingChange);\n      batteryManager.addEventListener('levelchange', onLevelChange);\n    },\n    async stopObserving() {\n      const batteryManager = await getBatteryManagerAsync();\n      if (!batteryManager) return;\n      batteryManager.removeEventListener('chargingchange', onChargingChange);\n      batteryManager.removeEventListener('levelchange', onLevelChange);\n    }\n  };\n  let lastReportedState = _BatteryTypes.BatteryState.UNKNOWN;\n  function getBatteryState(isCharging, level) {\n    return isCharging ? level >= 1.0 ? _BatteryTypes.BatteryState.FULL : _BatteryTypes.BatteryState.CHARGING : _BatteryTypes.BatteryState.UNPLUGGED;\n  }\n  function emitStateChange(isCharging, level) {\n    const batteryState = getBatteryState(isCharging, level);\n    // prevent sending the same state change twice.\n    if (batteryState === lastReportedState) return;\n    lastReportedState = batteryState;\n    emitter.emit('Expo.batteryStateDidChange', {\n      batteryState\n    });\n  }\n  function onChargingChange() {\n    emitStateChange(this.charging, this.level);\n  }\n  function onLevelChange() {\n    const batteryLevel = this.level;\n    // update the state as well in case the state changed to full.\n    emitStateChange(this.charging, this.level);\n    emitter.emit('Expo.batteryLevelDidChange', {\n      batteryLevel\n    });\n  }\n  async function getBatteryManagerAsync() {\n    if (_expoModulesCore.Platform.isDOMAvailable === false) return null;\n    if ('getBattery' in navigator) {\n      // @ts-ignore\n      return await navigator.getBattery();\n    } else {\n      // @ts-ignore\n      return await navigator.battery;\n    }\n  }\n});","lineCount":78,"map":[[7,2,4,0,"Object"],[7,8,4,0],[7,9,4,0,"defineProperty"],[7,23,4,0],[7,24,4,0,"exports"],[7,31,4,0],[8,4,4,0,"enumerable"],[8,14,4,0],[9,4,4,0,"get"],[9,7,4,0],[9,18,4,0,"get"],[9,19,4,0],[10,6,4,0],[10,13,4,0,"_default"],[10,21,4,0],[11,4,4,0],[12,2,4,0],[13,2,1,0],[13,6,1,0,"_expoModulesCore"],[13,22,1,0],[13,25,1,0,"require"],[13,32,1,0],[13,33,1,0,"_dependencyMap"],[13,47,1,0],[14,2,2,0],[14,6,2,0,"_BatteryTypes"],[14,19,2,0],[14,22,2,0,"require"],[14,29,2,0],[14,30,2,0,"_dependencyMap"],[14,44,2,0],[15,2,3,0],[15,8,3,6,"emitter"],[15,15,3,13],[15,18,3,16],[15,22,3,20,"EventEmitter"],[15,38,3,32],[15,39,3,32,"EventEmitter"],[15,51,3,32],[15,52,3,33],[15,53,3,34],[16,2,4,0],[16,6,4,0,"_default"],[16,14,4,0],[16,17,4,15],[17,4,5,4],[17,8,5,8,"isSupported"],[17,19,5,19,"isSupported"],[17,20,5,19],[17,22,5,22],[18,6,6,8],[19,6,7,8],[19,13,7,15,"Platform"],[19,29,7,23],[19,30,7,23,"Platform"],[19,38,7,23],[19,39,7,24,"isDOMAvailable"],[19,53,7,38],[19,58,7,43],[19,70,7,55],[19,74,7,59,"navigator"],[19,83,7,68],[19,87,7,72],[19,96,7,81],[19,100,7,85,"navigator"],[19,109,7,94],[19,110,7,95],[20,4,8,4],[20,5,8,5],[21,4,9,4],[21,10,9,10,"getBatteryLevelAsync"],[21,30,9,30,"getBatteryLevelAsync"],[21,31,9,30],[21,33,9,33],[22,6,10,8],[22,12,10,14,"batteryManager"],[22,26,10,28],[22,29,10,31],[22,35,10,37,"getBatteryManagerAsync"],[22,57,10,59],[22,58,10,60],[22,59,10,61],[23,6,11,8],[23,10,11,12],[23,11,11,13,"batteryManager"],[23,25,11,27],[23,27,12,12],[23,34,12,19],[23,35,12,20],[23,36,12,21],[24,6,13,8],[24,13,13,15,"batteryManager"],[24,27,13,29],[24,28,13,30,"level"],[24,33,13,35],[25,4,14,4],[25,5,14,5],[26,4,15,4],[26,10,15,10,"getBatteryStateAsync"],[26,30,15,30,"getBatteryStateAsync"],[26,31,15,30],[26,33,15,33],[27,6,16,8],[27,12,16,14,"batteryManager"],[27,26,16,28],[27,29,16,31],[27,35,16,37,"getBatteryManagerAsync"],[27,57,16,59],[27,58,16,60],[27,59,16,61],[28,6,17,8],[28,10,17,12],[28,11,17,13,"batteryManager"],[28,25,17,27],[28,27,18,12],[28,34,18,19,"BatteryState"],[28,47,18,31],[28,48,18,31,"BatteryState"],[28,60,18,31],[28,61,18,32,"UNKNOWN"],[28,68,18,39],[29,6,19,8],[29,13,19,15,"getBatteryState"],[29,28,19,30],[29,29,19,31,"batteryManager"],[29,43,19,45],[29,44,19,46,"charging"],[29,52,19,54],[29,54,19,56,"batteryManager"],[29,68,19,70],[29,69,19,71,"level"],[29,74,19,76],[29,75,19,77],[30,4,20,4],[30,5,20,5],[31,4,21,4],[31,10,21,10,"startObserving"],[31,24,21,24,"startObserving"],[31,25,21,24],[31,27,21,27],[32,6,22,8],[32,12,22,14,"batteryManager"],[32,26,22,28],[32,29,22,31],[32,35,22,37,"getBatteryManagerAsync"],[32,57,22,59],[32,58,22,60],[32,59,22,61],[33,6,23,8],[33,10,23,12],[33,11,23,13,"batteryManager"],[33,25,23,27],[33,27,24,12],[34,6,25,8,"batteryManager"],[34,20,25,22],[34,21,25,23,"addEventListener"],[34,37,25,39],[34,38,25,40],[34,54,25,56],[34,56,25,58,"onChargingChange"],[34,72,25,74],[34,73,25,75],[35,6,26,8,"batteryManager"],[35,20,26,22],[35,21,26,23,"addEventListener"],[35,37,26,39],[35,38,26,40],[35,51,26,53],[35,53,26,55,"onLevelChange"],[35,66,26,68],[35,67,26,69],[36,4,27,4],[36,5,27,5],[37,4,28,4],[37,10,28,10,"stopObserving"],[37,23,28,23,"stopObserving"],[37,24,28,23],[37,26,28,26],[38,6,29,8],[38,12,29,14,"batteryManager"],[38,26,29,28],[38,29,29,31],[38,35,29,37,"getBatteryManagerAsync"],[38,57,29,59],[38,58,29,60],[38,59,29,61],[39,6,30,8],[39,10,30,12],[39,11,30,13,"batteryManager"],[39,25,30,27],[39,27,31,12],[40,6,32,8,"batteryManager"],[40,20,32,22],[40,21,32,23,"removeEventListener"],[40,40,32,42],[40,41,32,43],[40,57,32,59],[40,59,32,61,"onChargingChange"],[40,75,32,77],[40,76,32,78],[41,6,33,8,"batteryManager"],[41,20,33,22],[41,21,33,23,"removeEventListener"],[41,40,33,42],[41,41,33,43],[41,54,33,56],[41,56,33,58,"onLevelChange"],[41,69,33,71],[41,70,33,72],[42,4,34,4],[43,2,35,0],[43,3,35,1],[44,2,36,0],[44,6,36,4,"lastReportedState"],[44,23,36,21],[44,26,36,24,"BatteryState"],[44,39,36,36],[44,40,36,36,"BatteryState"],[44,52,36,36],[44,53,36,37,"UNKNOWN"],[44,60,36,44],[45,2,37,0],[45,11,37,9,"getBatteryState"],[45,26,37,24,"getBatteryState"],[45,27,37,25,"isCharging"],[45,37,37,35],[45,39,37,37,"level"],[45,44,37,42],[45,46,37,44],[46,4,38,4],[46,11,38,11,"isCharging"],[46,21,38,21],[46,24,39,10,"level"],[46,29,39,15],[46,33,39,19],[46,36,39,22],[46,39,40,14,"BatteryState"],[46,52,40,26],[46,53,40,26,"BatteryState"],[46,65,40,26],[46,66,40,27,"FULL"],[46,70,40,31],[46,73,41,14,"BatteryState"],[46,86,41,26],[46,87,41,26,"BatteryState"],[46,99,41,26],[46,100,41,27,"CHARGING"],[46,108,41,35],[46,111,42,10,"BatteryState"],[46,124,42,22],[46,125,42,22,"BatteryState"],[46,137,42,22],[46,138,42,23,"UNPLUGGED"],[46,147,42,32],[47,2,43,0],[48,2,44,0],[48,11,44,9,"emitStateChange"],[48,26,44,24,"emitStateChange"],[48,27,44,25,"isCharging"],[48,37,44,35],[48,39,44,37,"level"],[48,44,44,42],[48,46,44,44],[49,4,45,4],[49,10,45,10,"batteryState"],[49,22,45,22],[49,25,45,25,"getBatteryState"],[49,40,45,40],[49,41,45,41,"isCharging"],[49,51,45,51],[49,53,45,53,"level"],[49,58,45,58],[49,59,45,59],[50,4,46,4],[51,4,47,4],[51,8,47,8,"batteryState"],[51,20,47,20],[51,25,47,25,"lastReportedState"],[51,42,47,42],[51,44,48,8],[52,4,49,4,"lastReportedState"],[52,21,49,21],[52,24,49,24,"batteryState"],[52,36,49,36],[53,4,50,4,"emitter"],[53,11,50,11],[53,12,50,12,"emit"],[53,16,50,16],[53,17,50,17],[53,45,50,45],[53,47,50,47],[54,6,50,49,"batteryState"],[55,4,50,62],[55,5,50,63],[55,6,50,64],[56,2,51,0],[57,2,52,0],[57,11,52,9,"onChargingChange"],[57,27,52,25,"onChargingChange"],[57,28,52,25],[57,30,52,28],[58,4,53,4,"emitStateChange"],[58,19,53,19],[58,20,53,20],[58,24,53,24],[58,25,53,25,"charging"],[58,33,53,33],[58,35,53,35],[58,39,53,39],[58,40,53,40,"level"],[58,45,53,45],[58,46,53,46],[59,2,54,0],[60,2,55,0],[60,11,55,9,"onLevelChange"],[60,24,55,22,"onLevelChange"],[60,25,55,22],[60,27,55,25],[61,4,56,4],[61,10,56,10,"batteryLevel"],[61,22,56,22],[61,25,56,25],[61,29,56,29],[61,30,56,30,"level"],[61,35,56,35],[62,4,57,4],[63,4,58,4,"emitStateChange"],[63,19,58,19],[63,20,58,20],[63,24,58,24],[63,25,58,25,"charging"],[63,33,58,33],[63,35,58,35],[63,39,58,39],[63,40,58,40,"level"],[63,45,58,45],[63,46,58,46],[64,4,59,4,"emitter"],[64,11,59,11],[64,12,59,12,"emit"],[64,16,59,16],[64,17,59,17],[64,45,59,45],[64,47,59,47],[65,6,59,49,"batteryLevel"],[66,4,59,62],[66,5,59,63],[66,6,59,64],[67,2,60,0],[68,2,61,0],[68,17,61,15,"getBatteryManagerAsync"],[68,39,61,37,"getBatteryManagerAsync"],[68,40,61,37],[68,42,61,40],[69,4,62,4],[69,8,62,8,"Platform"],[69,24,62,16],[69,25,62,16,"Platform"],[69,33,62,16],[69,34,62,17,"isDOMAvailable"],[69,48,62,31],[69,53,62,36],[69,58,62,41],[69,60,63,8],[69,67,63,15],[69,71,63,19],[70,4,64,4],[70,8,64,8],[70,20,64,20],[70,24,64,24,"navigator"],[70,33,64,33],[70,35,64,35],[71,6,65,8],[72,6,66,8],[72,13,66,15],[72,19,66,21,"navigator"],[72,28,66,30],[72,29,66,31,"getBattery"],[72,39,66,41],[72,40,66,42],[72,41,66,43],[73,4,67,4],[73,5,67,5],[73,11,68,9],[74,6,69,8],[75,6,70,8],[75,13,70,15],[75,19,70,21,"navigator"],[75,28,70,30],[75,29,70,31,"battery"],[75,36,70,38],[76,4,71,4],[77,2,72,0],[78,0,72,1],[78,3]],"functionMap":{"names":["<global>","default.get__isSupported","default.getBatteryLevelAsync","default.getBatteryStateAsync","default.startObserving","default.stopObserving","getBatteryState","emitStateChange","onChargingChange","onLevelChange","getBatteryManagerAsync"],"mappings":"AAA;ICI;KDG;IEC;KFK;IGC;KHK;IIC;KJM;IKC;KLM;AMG;CNM;AOC;CPO;AQC;CRE;ASC;CTK;AUC;CVW"},"hasCjsExports":false},"type":"js/module"}]}