{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":283},"end":{"line":11,"column":69,"index":352}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  /**\n   * AlertSettingsService - Сервис для управления настройками системы предупреждений\n   * \n   * Функции:\n   * - Настройка порога превышения скорости\n   * - Кастомизация текстов предупреждений\n   * - Настройка звуковых тем и интенсивности\n   * - Логика \"умолчания\" при нормальной скорости\n   */\n\n  const DEFAULT_SETTINGS = {\n    speedThresholdExcess: 20,\n    // +20 км/ч сверх рекомендованной\n    alertMode: 'full',\n    recommendedSpeeds: {\n      pothole: 40,\n      speed_bump: 20,\n      bump: 50,\n      vibration: 60,\n      braking: 50\n    },\n    customTexts: {\n      pothole: 'Яма через',\n      speed_bump: 'Лежачий полицейский через',\n      bump: 'Неровность через',\n      vibration: 'Плохое покрытие через',\n      braking: 'Место торможения через'\n    },\n    alertDistances: {\n      earlyWarning: 200,\n      mainWarning: 100,\n      urgentWarning: 50\n    }\n  };\n  class AlertSettingsService {\n    settings = DEFAULT_SETTINGS;\n    STORAGE_KEY = '@alert_settings';\n    async initialize() {\n      try {\n        const stored = await AsyncStorage.default.getItem(this.STORAGE_KEY);\n        if (stored) {\n          this.settings = Object.assign({}, DEFAULT_SETTINGS, JSON.parse(stored));\n        }\n      } catch (error) {\n        console.error('Error loading alert settings:', error);\n      }\n    }\n    async saveSettings(settings) {\n      try {\n        this.settings = Object.assign({}, this.settings, settings);\n        await AsyncStorage.default.setItem(this.STORAGE_KEY, JSON.stringify(this.settings));\n      } catch (error) {\n        console.error('Error saving alert settings:', error);\n      }\n    }\n    getSettings() {\n      return Object.assign({}, this.settings);\n    }\n\n    /**\n     * Проверяет, нужно ли предупреждать на основе скорости\n     * @returns { shouldAlert, alertLevel } - нужно ли предупреждать и уровень (silent/visual/voice/full)\n     */\n    checkSpeedAlert(obstacleType, currentSpeed) {\n      const recommendedSpeed = this.settings.recommendedSpeeds[obstacleType] || 50;\n      const speedExcess = currentSpeed - recommendedSpeed;\n\n      // Если не превышаем порог - молчим или только визуально\n      if (speedExcess <= this.settings.speedThresholdExcess) {\n        return {\n          shouldAlert: speedExcess > 0,\n          // Предупреждаем если хоть немного превышает\n          alertLevel: 'visual',\n          // Только визуально\n          speedExcess\n        };\n      }\n\n      // Превышаем порог - полное предупреждение\n      return {\n        shouldAlert: true,\n        alertLevel: 'full',\n        speedExcess\n      };\n    }\n\n    /**\n     * Получает текст предупреждения\n     */\n    getAlertText(obstacleType, distance) {\n      const baseText = this.settings.customTexts[obstacleType] || 'Препятствие через';\n      return `${baseText} ${Math.round(distance)} метров`;\n    }\n  }\n  // Звуковые настройки теперь находятся в DynamicAudioAlertService (audio-settings.tsx)\n\n  var _default = new AlertSettingsService();\n});","lineCount":117,"map":[[12,2,138,0,"Object"],[12,8,138,0],[12,9,138,0,"defineProperty"],[12,23,138,0],[12,24,138,0,"exports"],[12,31,138,0],[13,4,138,0,"enumerable"],[13,14,138,0],[14,4,138,0,"get"],[14,7,138,0],[14,18,138,0,"get"],[14,19,138,0],[15,6,138,0],[15,13,138,0,"_default"],[15,21,138,0],[16,4,138,0],[17,2,138,0],[18,2,11,0],[18,6,11,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,11,0],[18,45,11,0,"require"],[18,52,11,0],[18,53,11,0,"_dependencyMap"],[18,67,11,0],[19,2,11,0],[19,6,11,0,"AsyncStorage"],[19,18,11,0],[19,21,11,0,"_interopDefault"],[19,36,11,0],[19,37,11,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,11,0],[20,2,1,0],[21,0,2,0],[22,0,3,0],[23,0,4,0],[24,0,5,0],[25,0,6,0],[26,0,7,0],[27,0,8,0],[28,0,9,0],[30,2,46,0],[30,8,46,6,"DEFAULT_SETTINGS"],[30,24,46,37],[30,27,46,40],[31,4,47,2,"speedThresholdExcess"],[31,24,47,22],[31,26,47,24],[31,28,47,26],[32,4,47,28],[33,4,48,2,"alertMode"],[33,13,48,11],[33,15,48,13],[33,21,48,19],[34,4,49,2,"recommendedSpeeds"],[34,21,49,19],[34,23,49,21],[35,6,50,4,"pothole"],[35,13,50,11],[35,15,50,13],[35,17,50,15],[36,6,51,4,"speed_bump"],[36,16,51,14],[36,18,51,16],[36,20,51,18],[37,6,52,4,"bump"],[37,10,52,8],[37,12,52,10],[37,14,52,12],[38,6,53,4,"vibration"],[38,15,53,13],[38,17,53,15],[38,19,53,17],[39,6,54,4,"braking"],[39,13,54,11],[39,15,54,13],[40,4,55,2],[40,5,55,3],[41,4,56,2,"customTexts"],[41,15,56,13],[41,17,56,15],[42,6,57,4,"pothole"],[42,13,57,11],[42,15,57,13],[42,26,57,24],[43,6,58,4,"speed_bump"],[43,16,58,14],[43,18,58,16],[43,45,58,43],[44,6,59,4,"bump"],[44,10,59,8],[44,12,59,10],[44,30,59,28],[45,6,60,4,"vibration"],[45,15,60,13],[45,17,60,15],[45,40,60,38],[46,6,61,4,"braking"],[46,13,61,11],[46,15,61,13],[47,4,62,2],[47,5,62,3],[48,4,63,2,"alertDistances"],[48,18,63,16],[48,20,63,18],[49,6,64,4,"earlyWarning"],[49,18,64,16],[49,20,64,18],[49,23,64,21],[50,6,65,4,"mainWarning"],[50,17,65,15],[50,19,65,17],[50,22,65,20],[51,6,66,4,"urgentWarning"],[51,19,66,17],[51,21,66,19],[52,4,67,2],[53,2,68,0],[53,3,68,1],[54,2,70,0],[54,8,70,6,"AlertSettingsService"],[54,28,70,26],[54,29,70,27],[55,4,71,10,"settings"],[55,12,71,18],[55,15,71,36,"DEFAULT_SETTINGS"],[55,31,71,52],[56,4,72,19,"STORAGE_KEY"],[56,15,72,30],[56,18,72,33],[56,35,72,50],[57,4,74,2],[57,10,74,8,"initialize"],[57,20,74,18,"initialize"],[57,21,74,18],[57,23,74,21],[58,6,75,4],[58,10,75,8],[59,8,76,6],[59,14,76,12,"stored"],[59,20,76,18],[59,23,76,21],[59,29,76,27,"AsyncStorage"],[59,41,76,39],[59,42,76,39,"default"],[59,49,76,39],[59,50,76,40,"getItem"],[59,57,76,47],[59,58,76,48],[59,62,76,52],[59,63,76,53,"STORAGE_KEY"],[59,74,76,64],[59,75,76,65],[60,8,77,6],[60,12,77,10,"stored"],[60,18,77,16],[60,20,77,18],[61,10,78,8],[61,14,78,12],[61,15,78,13,"settings"],[61,23,78,21],[61,26,78,21,"Object"],[61,32,78,21],[61,33,78,21,"assign"],[61,39,78,21],[61,44,78,29,"DEFAULT_SETTINGS"],[61,60,78,45],[61,62,78,50,"JSON"],[61,66,78,54],[61,67,78,55,"parse"],[61,72,78,60],[61,73,78,61,"stored"],[61,79,78,67],[61,80,78,68],[61,81,78,70],[62,8,79,6],[63,6,80,4],[63,7,80,5],[63,8,80,6],[63,15,80,13,"error"],[63,20,80,18],[63,22,80,20],[64,8,81,6,"console"],[64,15,81,13],[64,16,81,14,"error"],[64,21,81,19],[64,22,81,20],[64,53,81,51],[64,55,81,53,"error"],[64,60,81,58],[64,61,81,59],[65,6,82,4],[66,4,83,2],[67,4,85,2],[67,10,85,8,"saveSettings"],[67,22,85,20,"saveSettings"],[67,23,85,21,"settings"],[67,31,85,53],[67,33,85,55],[68,6,86,4],[68,10,86,8],[69,8,87,6],[69,12,87,10],[69,13,87,11,"settings"],[69,21,87,19],[69,24,87,19,"Object"],[69,30,87,19],[69,31,87,19,"assign"],[69,37,87,19],[69,42,87,27],[69,46,87,31],[69,47,87,32,"settings"],[69,55,87,40],[69,57,87,45,"settings"],[69,65,87,53],[69,66,87,55],[70,8,88,6],[70,14,88,12,"AsyncStorage"],[70,26,88,24],[70,27,88,24,"default"],[70,34,88,24],[70,35,88,25,"setItem"],[70,42,88,32],[70,43,88,33],[70,47,88,37],[70,48,88,38,"STORAGE_KEY"],[70,59,88,49],[70,61,88,51,"JSON"],[70,65,88,55],[70,66,88,56,"stringify"],[70,75,88,65],[70,76,88,66],[70,80,88,70],[70,81,88,71,"settings"],[70,89,88,79],[70,90,88,80],[70,91,88,81],[71,6,89,4],[71,7,89,5],[71,8,89,6],[71,15,89,13,"error"],[71,20,89,18],[71,22,89,20],[72,8,90,6,"console"],[72,15,90,13],[72,16,90,14,"error"],[72,21,90,19],[72,22,90,20],[72,52,90,50],[72,54,90,52,"error"],[72,59,90,57],[72,60,90,58],[73,6,91,4],[74,4,92,2],[75,4,94,2,"getSettings"],[75,15,94,13,"getSettings"],[75,16,94,13],[75,18,94,31],[76,6,95,4],[76,13,95,4,"Object"],[76,19,95,4],[76,20,95,4,"assign"],[76,26,95,4],[76,31,95,16],[76,35,95,20],[76,36,95,21,"settings"],[76,44,95,29],[77,4,96,2],[79,4,98,2],[80,0,99,0],[81,0,100,0],[82,0,101,0],[83,4,102,2,"checkSpeedAlert"],[83,19,102,17,"checkSpeedAlert"],[83,20,102,18,"obstacleType"],[83,32,102,38],[83,34,102,40,"currentSpeed"],[83,46,102,60],[83,48,106,4],[84,6,107,4],[84,12,107,10,"recommendedSpeed"],[84,28,107,26],[84,31,107,29],[84,35,107,33],[84,36,107,34,"settings"],[84,44,107,42],[84,45,107,43,"recommendedSpeeds"],[84,62,107,60],[84,63,107,61,"obstacleType"],[84,75,107,73],[84,76,107,122],[84,80,107,126],[84,82,107,128],[85,6,108,4],[85,12,108,10,"speedExcess"],[85,23,108,21],[85,26,108,24,"currentSpeed"],[85,38,108,36],[85,41,108,39,"recommendedSpeed"],[85,57,108,55],[87,6,110,4],[88,6,111,4],[88,10,111,8,"speedExcess"],[88,21,111,19],[88,25,111,23],[88,29,111,27],[88,30,111,28,"settings"],[88,38,111,36],[88,39,111,37,"speedThresholdExcess"],[88,59,111,57],[88,61,111,59],[89,8,112,6],[89,15,112,13],[90,10,113,8,"shouldAlert"],[90,21,113,19],[90,23,113,21,"speedExcess"],[90,34,113,32],[90,37,113,35],[90,38,113,36],[91,10,113,38],[92,10,114,8,"alertLevel"],[92,20,114,18],[92,22,114,20],[92,30,114,28],[93,10,114,30],[94,10,115,8,"speedExcess"],[95,8,116,6],[95,9,116,7],[96,6,117,4],[98,6,119,4],[99,6,120,4],[99,13,120,11],[100,8,121,6,"shouldAlert"],[100,19,121,17],[100,21,121,19],[100,25,121,23],[101,8,122,6,"alertLevel"],[101,18,122,16],[101,20,122,18],[101,26,122,24],[102,8,123,6,"speedExcess"],[103,6,124,4],[103,7,124,5],[104,4,125,2],[106,4,127,2],[107,0,128,0],[108,0,129,0],[109,4,130,2,"getAlertText"],[109,16,130,14,"getAlertText"],[109,17,130,15,"obstacleType"],[109,29,130,35],[109,31,130,37,"distance"],[109,39,130,53],[109,41,130,63],[110,6,131,4],[110,12,131,10,"baseText"],[110,20,131,18],[110,23,131,21],[110,27,131,25],[110,28,131,26,"settings"],[110,36,131,34],[110,37,131,35,"customTexts"],[110,48,131,46],[110,49,131,47,"obstacleType"],[110,61,131,59],[110,62,131,102],[110,66,131,106],[110,85,131,125],[111,6,132,4],[111,13,132,11],[111,16,132,14,"baseText"],[111,24,132,22],[111,28,132,26,"Math"],[111,32,132,30],[111,33,132,31,"round"],[111,38,132,36],[111,39,132,37,"distance"],[111,47,132,45],[111,48,132,46],[111,57,132,55],[112,4,133,2],[113,2,135,0],[114,2,136,0],[116,2,138,0],[116,6,138,0,"_default"],[116,14,138,0],[116,17,138,15],[116,21,138,19,"AlertSettingsService"],[116,41,138,39],[116,42,138,40],[116,43,138,41],[117,0,138,42],[117,3]],"functionMap":{"names":["<global>","AlertSettingsService","initialize","saveSettings","getSettings","checkSpeedAlert","getAlertText"],"mappings":"AAA;ACqE;ECI;GDS;EEE;GFO;EGE;GHE;EIM;GJuB;EKK;GLG;CDE"},"hasCjsExports":false},"type":"js/module"}]}