{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":283},"end":{"line":11,"column":69,"index":352}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  /**\n   * AlertSettingsService - Сервис для управления настройками системы предупреждений\n   * \n   * Функции:\n   * - Настройка порога превышения скорости\n   * - Кастомизация текстов предупреждений\n   * - Настройка звуковых тем и интенсивности\n   * - Логика \"умолчания\" при нормальной скорости\n   */\n\n  const DEFAULT_SETTINGS = {\n    speedThresholdExcess: 20,\n    // +20 км/ч сверх рекомендованной\n    alertMode: 'full',\n    recommendedSpeeds: {\n      pothole: 40,\n      speed_bump: 20,\n      bump: 50,\n      vibration: 60,\n      braking: 50\n    },\n    customTexts: {\n      pothole: 'Яма через',\n      speed_bump: 'Лежачий полицейский через',\n      bump: 'Неровность через',\n      vibration: 'Плохое покрытие через',\n      braking: 'Место торможения через'\n    },\n    alertDistances: {\n      earlyWarning: 200,\n      mainWarning: 100,\n      urgentWarning: 50\n    }\n  };\n  class AlertSettingsService {\n    settings = DEFAULT_SETTINGS;\n    STORAGE_KEY = '@alert_settings';\n    async initialize() {\n      try {\n        const stored = await AsyncStorage.default.getItem(this.STORAGE_KEY);\n        if (stored) {\n          this.settings = {\n            ...DEFAULT_SETTINGS,\n            ...JSON.parse(stored)\n          };\n        }\n      } catch (error) {\n        console.error('Error loading alert settings:', error);\n      }\n    }\n    async saveSettings(settings) {\n      try {\n        this.settings = {\n          ...this.settings,\n          ...settings\n        };\n        await AsyncStorage.default.setItem(this.STORAGE_KEY, JSON.stringify(this.settings));\n      } catch (error) {\n        console.error('Error saving alert settings:', error);\n      }\n    }\n    getSettings() {\n      return {\n        ...this.settings\n      };\n    }\n\n    /**\n     * Проверяет, нужно ли предупреждать на основе скорости\n     * @returns { shouldAlert, alertLevel } - нужно ли предупреждать и уровень (silent/visual/voice/full)\n     */\n    checkSpeedAlert(obstacleType, currentSpeed) {\n      const recommendedSpeed = this.settings.recommendedSpeeds[obstacleType] || 50;\n      const speedExcess = currentSpeed - recommendedSpeed;\n\n      // Если не превышаем порог - молчим или только визуально\n      if (speedExcess <= this.settings.speedThresholdExcess) {\n        return {\n          shouldAlert: speedExcess > 0,\n          // Предупреждаем если хоть немного превышает\n          alertLevel: 'visual',\n          // Только визуально\n          speedExcess\n        };\n      }\n\n      // Превышаем порог - полное предупреждение\n      return {\n        shouldAlert: true,\n        alertLevel: 'full',\n        speedExcess\n      };\n    }\n\n    /**\n     * Получает текст предупреждения\n     */\n    getAlertText(obstacleType, distance) {\n      const baseText = this.settings.customTexts[obstacleType] || 'Препятствие через';\n      return `${baseText} ${Math.round(distance)} метров`;\n    }\n  }\n  // Звуковые настройки теперь находятся в DynamicAudioAlertService (audio-settings.tsx)\n\n  var _default = new AlertSettingsService();\n});","lineCount":125,"map":[[12,2,138,0,"Object"],[12,8,138,0],[12,9,138,0,"defineProperty"],[12,23,138,0],[12,24,138,0,"exports"],[12,31,138,0],[13,4,138,0,"enumerable"],[13,14,138,0],[14,4,138,0,"get"],[14,7,138,0],[14,18,138,0,"get"],[14,19,138,0],[15,6,138,0],[15,13,138,0,"_default"],[15,21,138,0],[16,4,138,0],[17,2,138,0],[18,2,11,0],[18,6,11,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,11,0],[18,45,11,0,"require"],[18,52,11,0],[18,53,11,0,"_dependencyMap"],[18,67,11,0],[19,2,11,0],[19,6,11,0,"AsyncStorage"],[19,18,11,0],[19,21,11,0,"_interopDefault"],[19,36,11,0],[19,37,11,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,11,0],[20,2,1,0],[21,0,2,0],[22,0,3,0],[23,0,4,0],[24,0,5,0],[25,0,6,0],[26,0,7,0],[27,0,8,0],[28,0,9,0],[30,2,46,0],[30,8,46,6,"DEFAULT_SETTINGS"],[30,24,46,37],[30,27,46,40],[31,4,47,2,"speedThresholdExcess"],[31,24,47,22],[31,26,47,24],[31,28,47,26],[32,4,47,28],[33,4,48,2,"alertMode"],[33,13,48,11],[33,15,48,13],[33,21,48,19],[34,4,49,2,"recommendedSpeeds"],[34,21,49,19],[34,23,49,21],[35,6,50,4,"pothole"],[35,13,50,11],[35,15,50,13],[35,17,50,15],[36,6,51,4,"speed_bump"],[36,16,51,14],[36,18,51,16],[36,20,51,18],[37,6,52,4,"bump"],[37,10,52,8],[37,12,52,10],[37,14,52,12],[38,6,53,4,"vibration"],[38,15,53,13],[38,17,53,15],[38,19,53,17],[39,6,54,4,"braking"],[39,13,54,11],[39,15,54,13],[40,4,55,2],[40,5,55,3],[41,4,56,2,"customTexts"],[41,15,56,13],[41,17,56,15],[42,6,57,4,"pothole"],[42,13,57,11],[42,15,57,13],[42,26,57,24],[43,6,58,4,"speed_bump"],[43,16,58,14],[43,18,58,16],[43,45,58,43],[44,6,59,4,"bump"],[44,10,59,8],[44,12,59,10],[44,30,59,28],[45,6,60,4,"vibration"],[45,15,60,13],[45,17,60,15],[45,40,60,38],[46,6,61,4,"braking"],[46,13,61,11],[46,15,61,13],[47,4,62,2],[47,5,62,3],[48,4,63,2,"alertDistances"],[48,18,63,16],[48,20,63,18],[49,6,64,4,"earlyWarning"],[49,18,64,16],[49,20,64,18],[49,23,64,21],[50,6,65,4,"mainWarning"],[50,17,65,15],[50,19,65,17],[50,22,65,20],[51,6,66,4,"urgentWarning"],[51,19,66,17],[51,21,66,19],[52,4,67,2],[53,2,68,0],[53,3,68,1],[54,2,70,0],[54,8,70,6,"AlertSettingsService"],[54,28,70,26],[54,29,70,27],[55,4,71,10,"settings"],[55,12,71,18],[55,15,71,36,"DEFAULT_SETTINGS"],[55,31,71,52],[56,4,72,19,"STORAGE_KEY"],[56,15,72,30],[56,18,72,33],[56,35,72,50],[57,4,74,2],[57,10,74,8,"initialize"],[57,20,74,18,"initialize"],[57,21,74,18],[57,23,74,21],[58,6,75,4],[58,10,75,8],[59,8,76,6],[59,14,76,12,"stored"],[59,20,76,18],[59,23,76,21],[59,29,76,27,"AsyncStorage"],[59,41,76,39],[59,42,76,39,"default"],[59,49,76,39],[59,50,76,40,"getItem"],[59,57,76,47],[59,58,76,48],[59,62,76,52],[59,63,76,53,"STORAGE_KEY"],[59,74,76,64],[59,75,76,65],[60,8,77,6],[60,12,77,10,"stored"],[60,18,77,16],[60,20,77,18],[61,10,78,8],[61,14,78,12],[61,15,78,13,"settings"],[61,23,78,21],[61,26,78,24],[62,12,78,26],[62,15,78,29,"DEFAULT_SETTINGS"],[62,31,78,45],[63,12,78,47],[63,15,78,50,"JSON"],[63,19,78,54],[63,20,78,55,"parse"],[63,25,78,60],[63,26,78,61,"stored"],[63,32,78,67],[64,10,78,69],[64,11,78,70],[65,8,79,6],[66,6,80,4],[66,7,80,5],[66,8,80,6],[66,15,80,13,"error"],[66,20,80,18],[66,22,80,20],[67,8,81,6,"console"],[67,15,81,13],[67,16,81,14,"error"],[67,21,81,19],[67,22,81,20],[67,53,81,51],[67,55,81,53,"error"],[67,60,81,58],[67,61,81,59],[68,6,82,4],[69,4,83,2],[70,4,85,2],[70,10,85,8,"saveSettings"],[70,22,85,20,"saveSettings"],[70,23,85,21,"settings"],[70,31,85,53],[70,33,85,55],[71,6,86,4],[71,10,86,8],[72,8,87,6],[72,12,87,10],[72,13,87,11,"settings"],[72,21,87,19],[72,24,87,22],[73,10,87,24],[73,13,87,27],[73,17,87,31],[73,18,87,32,"settings"],[73,26,87,40],[74,10,87,42],[74,13,87,45,"settings"],[75,8,87,54],[75,9,87,55],[76,8,88,6],[76,14,88,12,"AsyncStorage"],[76,26,88,24],[76,27,88,24,"default"],[76,34,88,24],[76,35,88,25,"setItem"],[76,42,88,32],[76,43,88,33],[76,47,88,37],[76,48,88,38,"STORAGE_KEY"],[76,59,88,49],[76,61,88,51,"JSON"],[76,65,88,55],[76,66,88,56,"stringify"],[76,75,88,65],[76,76,88,66],[76,80,88,70],[76,81,88,71,"settings"],[76,89,88,79],[76,90,88,80],[76,91,88,81],[77,6,89,4],[77,7,89,5],[77,8,89,6],[77,15,89,13,"error"],[77,20,89,18],[77,22,89,20],[78,8,90,6,"console"],[78,15,90,13],[78,16,90,14,"error"],[78,21,90,19],[78,22,90,20],[78,52,90,50],[78,54,90,52,"error"],[78,59,90,57],[78,60,90,58],[79,6,91,4],[80,4,92,2],[81,4,94,2,"getSettings"],[81,15,94,13,"getSettings"],[81,16,94,13],[81,18,94,31],[82,6,95,4],[82,13,95,11],[83,8,95,13],[83,11,95,16],[83,15,95,20],[83,16,95,21,"settings"],[84,6,95,30],[84,7,95,31],[85,4,96,2],[87,4,98,2],[88,0,99,0],[89,0,100,0],[90,0,101,0],[91,4,102,2,"checkSpeedAlert"],[91,19,102,17,"checkSpeedAlert"],[91,20,102,18,"obstacleType"],[91,32,102,38],[91,34,102,40,"currentSpeed"],[91,46,102,60],[91,48,106,4],[92,6,107,4],[92,12,107,10,"recommendedSpeed"],[92,28,107,26],[92,31,107,29],[92,35,107,33],[92,36,107,34,"settings"],[92,44,107,42],[92,45,107,43,"recommendedSpeeds"],[92,62,107,60],[92,63,107,61,"obstacleType"],[92,75,107,73],[92,76,107,122],[92,80,107,126],[92,82,107,128],[93,6,108,4],[93,12,108,10,"speedExcess"],[93,23,108,21],[93,26,108,24,"currentSpeed"],[93,38,108,36],[93,41,108,39,"recommendedSpeed"],[93,57,108,55],[95,6,110,4],[96,6,111,4],[96,10,111,8,"speedExcess"],[96,21,111,19],[96,25,111,23],[96,29,111,27],[96,30,111,28,"settings"],[96,38,111,36],[96,39,111,37,"speedThresholdExcess"],[96,59,111,57],[96,61,111,59],[97,8,112,6],[97,15,112,13],[98,10,113,8,"shouldAlert"],[98,21,113,19],[98,23,113,21,"speedExcess"],[98,34,113,32],[98,37,113,35],[98,38,113,36],[99,10,113,38],[100,10,114,8,"alertLevel"],[100,20,114,18],[100,22,114,20],[100,30,114,28],[101,10,114,30],[102,10,115,8,"speedExcess"],[103,8,116,6],[103,9,116,7],[104,6,117,4],[106,6,119,4],[107,6,120,4],[107,13,120,11],[108,8,121,6,"shouldAlert"],[108,19,121,17],[108,21,121,19],[108,25,121,23],[109,8,122,6,"alertLevel"],[109,18,122,16],[109,20,122,18],[109,26,122,24],[110,8,123,6,"speedExcess"],[111,6,124,4],[111,7,124,5],[112,4,125,2],[114,4,127,2],[115,0,128,0],[116,0,129,0],[117,4,130,2,"getAlertText"],[117,16,130,14,"getAlertText"],[117,17,130,15,"obstacleType"],[117,29,130,35],[117,31,130,37,"distance"],[117,39,130,53],[117,41,130,63],[118,6,131,4],[118,12,131,10,"baseText"],[118,20,131,18],[118,23,131,21],[118,27,131,25],[118,28,131,26,"settings"],[118,36,131,34],[118,37,131,35,"customTexts"],[118,48,131,46],[118,49,131,47,"obstacleType"],[118,61,131,59],[118,62,131,102],[118,66,131,106],[118,85,131,125],[119,6,132,4],[119,13,132,11],[119,16,132,14,"baseText"],[119,24,132,22],[119,28,132,26,"Math"],[119,32,132,30],[119,33,132,31,"round"],[119,38,132,36],[119,39,132,37,"distance"],[119,47,132,45],[119,48,132,46],[119,57,132,55],[120,4,133,2],[121,2,135,0],[122,2,136,0],[124,2,138,0],[124,6,138,0,"_default"],[124,14,138,0],[124,17,138,15],[124,21,138,19,"AlertSettingsService"],[124,41,138,39],[124,42,138,40],[124,43,138,41],[125,0,138,42],[125,3]],"functionMap":{"names":["<global>","AlertSettingsService","initialize","saveSettings","getSettings","checkSpeedAlert","getAlertText"],"mappings":"AAA;ACqE;ECI;GDS;EEE;GFO;EGE;GHE;EIM;GJuB;EKK;GLG;CDE"},"hasCjsExports":false},"type":"js/module"}]}